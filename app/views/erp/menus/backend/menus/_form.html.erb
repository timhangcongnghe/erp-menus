<%= form_for([erp_menus, :backend, menu], html: {multipart: true}) do |f| %>
    <div class="form-body">        
        <div class="row">
            <div class="col-md-6">
                <div class="portlet light bordered">
                    <div class="portlet-body form">
                        <div class="row">
                            <div class="col-md-6">
                                <h4>Hình ảnh 1 (Trái)</h4>
                                <%= erp_form_control('image', {
                                    img_src: menu.image_url_1,
                                    name: 'menu[image_url_1]',
                                    width: 150,
                                    height: 150
                                }) %>
                            </div>
                            <div class="col-md-6">
                                <h4>Hình ảnh 2 (Phải)</h4>
                                <%= erp_form_control('image', {
                                    img_src: menu.image_url_2,
                                    name: 'menu[image_url_2]',
                                    width: 150,
                                    height: 150
                                }) %>
                            </div>
                        </div>
                        <%= erp_form_control("text", {
                            name: 'menu[image_menu_link_1]',
                            value: menu.image_menu_link_1,                   
                            label: t('.image_menu_link_1'),
                            placeholder: t('.enter_image_menu_link_1')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'menu[image_menu_link_2]',
                            value: menu.image_menu_link_2,                   
                            label: t('.image_menu_link_2'),
                            placeholder: t('.enter_image_menu_link_2')
                        }) %>
                        <%= erp_form_control("text", {
                            name: 'menu[name]',
                            value: menu.name,                   
                            label: t('.name'),
                            placeholder: t('.enter_name'),
                            required: true,
                            errors: menu.errors.full_messages_for(:name)
                        }) %>
                        <%= erp_form_control("dataselect", {
                            name: 'menu[parent_id]',
                            value: menu.parent_id,
                            text: menu.parent_name,
                            placeholder: t('.choose_parent_menu'),
                            label: t('.parent_menu'),
                            url: erp_menus.dataselect_backend_menus_path(format: 'json'),
                            create: {
                                url: erp_menus.new_backend_menu_path,
                                title: t('.create_menu'),
                                container_selector: '.new_menu',
                                input_selector: 'input[name="menu[name]"]'
                            }
                        }) %>
                        <%= erp_form_control('select', {
                            label: t('.menu_type'),
                            name: 'menu[menu_type]',
                            value: menu.menu_type,
                            options: Erp::Menus::Menu.get_menu_type_options(),
                            required: true,
                            errors: menu.errors.full_messages_for(:menu_type)
                        }) %>
                        <%= erp_form_control("textarea", {
                            name: 'menu[description]',
                            value: menu.description,                   
                            label: t('.description'),
                            placeholder: t('.enter_description')
                        }) %>                                                           
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="portlet light bordered">
                    <div class="portlet-body form">
                        <div class="row">                            
                            <div class="col-md-6">
                                <h4>Icon cho menu</h4>
                                <%= erp_form_control('image', {
                                    img_src: menu.menu_icon,
                                    name: 'menu[menu_icon]',
                                    width: 100,
                                    height: 100
                                }) %>
                            </div>
                        </div>
                        <%= erp_form_control("dataselect", {
                            name: 'menu[brand_group_id]',
                            value: menu.brand_group_id,
                            text: menu.brand_group_name,
                            placeholder: t('.choose_brand_group'),
                            label: t('.brand_group'),
                            help: t('.help_brand_group'),
                            url: erp_products.dataselect_backend_brand_groups_path(format: 'json'),
                            create: {
                                url: erp_products.new_backend_brand_group_path,
                                title: t('.create_brand_group'),
                                container_selector: '.new_brand_group',
                                input_selector: 'input[name="brand_group[name]"]'
                            },
                            edit: {
                                url: erp_products.edit_backend_category_path(id: ':value'),
                                title: t('.edit_brand_group'),
                                container_selector: '.edit_brand_group',
                            }
                        }) %>
                        <div class="row">
                            <div class="col-sm-6">
                                <%= erp_form_control("text", {
                                    name: 'menu[style_icon]',
                                    value: menu.style_icon,                   
                                    label: t('.style_icon')
                                }) %>
                            </div>
                            <div class="col-sm-6">
                                <%= erp_form_control('select', {
                                    label: t('.style_color'),
                                    name: 'menu[style_color]',
                                    value: menu.style_color,
                                    options: Erp::Menus::Menu.get_style_color_options()
                                }) %>
                            </div>
                        </div>                        
                        <%= erp_form_control("textarea", {
                            name: 'menu[meta_keywords]',
                            value: menu.meta_keywords,                   
                            label: t('.meta_keywords'),
                            placeholder: t('.enter_meta_keywords')
                        }) %>
                        <%= erp_form_control("textarea", {
                            name: 'menu[meta_description]',
                            value: menu.meta_description,                   
                            label: t('.meta_description'),
                            placeholder: t('.enter_meta_description')
                        }) %>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="tabbable-custom ">
                    <ul class="nav nav-tabs ">
                        <li class="active">
                            <a href="#tab_category" data-toggle="tab"> <%= t('.add_category') %> </a>
                        </li>
                    </ul>
                    <div class="tab-content order-details">
                        <div class="tab-pane addableform-table active" id="tab_category">
                            <%= erp_form_control("dataselect", {
                                name: 'menu[category_ids][]',
                                values: (menu.categories.map {|category| {text: category.name, value: category.id}}),
                                multiple: true,
                                label: t('.related_categories'),
                                placeholder: t('.choose_related_categories'),
                                url: erp_products.dataselect_backend_categories_path(format: 'json'),
                                create: {
                                    url: erp_products.new_backend_category_path,
                                    title: t('.create_category'),
                                    container_selector: '.new_category',
                                    input_selector: 'input[name="category[name]"]'
                                }
                            }) %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="tabbable-custom ">
                    <ul class="nav nav-tabs ">
                        <li class="active">
                            <a href="#tab_related_menu" data-toggle="tab"> <%= t('.related_menu') %> </a>
                        </li>
                    </ul>
                    <div class="tab-content order-details">
                        <div class="tab-pane addableform-table active" id="tab_related_menu">
                            <%= erp_form_control("addableform", {
                                type: 'table',
                                add_button: t('.add'),
                                partial: 'erp/menus/backend/related_menus/related_menu_line_form',
                                partial_url: erp_menus.related_menu_line_form_backend_related_menus_path,
                                items: @menu.related_menus,
                                item: :related_menu,
                                add_control_selector: "input[name='menu_id']",
                                add_control: erp_form_control("dataselect", {
                                    name: 'menu_id',
                                    placeholder: t('.choose_related_menu'),
                                    label: t('.related_menu'),
                                    help: t('.help_menu'),
                                    url: erp_menus.dataselect_backend_menus_path(format: 'json'),
                                    create: {
                                        url: erp_menus.new_backend_menu_path,
                                        title: t('.create_menu'),
                                        container_selector: '.new_menu',
                                        input_selector: 'input[name="menu[name]"]',
                                        modal_size: "full"
                                    },
                                    edit: {
                                        url: erp_menus.edit_backend_menu_path(id: ':value'),
                                        title: t('.edit_menu'),
                                        container_selector: '.edit_menu',
                                    }
                                }),
                                thead: "<th>#{t('.name')}</th>
                                        <th class='text-right'>#{t('.action')}</th>"
                            }) %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <%= erp_component('button/save', {
        text: t('submit')
    }) %>
    <%= erp_component('button/cancel', {
        text: t('cancel'),
        href: erp_menus.backend_menus_path
    }) %>
<% end %>